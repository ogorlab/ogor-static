---
import { useI18n } from "@/i18n";

const { t } = useI18n(Astro.currentLocale);

const { getUrl, backUrl } = Astro.locals

// console.log(getUrl("updates"))

const social = [
  {
    name: "Facebook",
    url: "https://www.facebook.com/ogor.ro",
    icon: "/icons.svg#facebook",
  },
  {
    name: "YouTube",
    url: "https://www.youtube.com/channel/UCyJXrLqqYUTwTaEC2FtKUDg",
    icon: "/icons.svg#youtube",
    // icon: "",
  },
  {
    name: "LinkedIn",
    url: "https://www.linkedin.com/company/ogor/",
    icon: "/icons.svg#linkedin",
    // icon: "",
  },
];
---

<footer>
  <a href="/" class="ogor-logo">
    <svg viewBox="0 0 960 384" height="64">
      <use href="/logos/ogor.svg#logo" width="384"></use>
      <use href="/logos/ogor.svg#logotype" x="320" y="64"></use>
    </svg>
  </a>

  <div class="contact">
    {/* TODO: add a phone format to i18next */}
    <div>üìû <a href={"tel:" + t("company.phone").replaceAll(/[^+|^0-9.]/g, "")} class="inline-block">{t("company.phone")}</a></div>
    <div>‚úâÔ∏è <a href={"mailto:" + t("company.email")} class="inline-block">{t("company.email")}</a></div>
    <span class="inline-block social-media">
      {
        social.map((platform) => (
          <a href={platform.url} title={platform.name} rel="external">
            <svg class="icon" viewBox="0 0 48 48" style="font-size: 200%;">
              <use href={ platform.icon }/>
            </svg>
            {/* {platform.name} */}
          </a>
        ))
      }
    </span>
  </div>

  <div class="about">
    <h4>{t("company.tagline")}</h4>
    <p>{t("company.description")}</p>
  </div>
  <hr />
  <ul class="nav">
    <li><a href={ getUrl("company") }>{ t("nav.company_long") }</a></li>
    <li><a href={ getUrl("company") + "#products" }>{ t("nav.products_long") }</a></li>
    <li><a href={ getUrl("updates") }>{ t("nav.updates") }</a></li>
    <li><a href={ import.meta.env.PUBLIC_OGOR_APP_LOGIN_URL }>CreeazƒÉ cont OGOR&nbsp;‚Üí</a></li>
  </ul>

  <ul class="legal">
    <li><a href="https://anpc.ro/" rel="external nofollow">ANPC</a></li>
    <li><a href={ getUrl("legal") + "#terms" }>{t("legal.terms")}</a></li>
    <li><a href={ getUrl("legal") + "#privacy" }>{t("legal.privacy")}</a></li>
    <li><a href={ getUrl("legal") + "#cookie" }>{t("legal.cookie")}</a></li>
  </ul>

  <address>
    {t("company.name")} <br />
    {t("company.cui")}  <br />
    {t("company.address")}
  </address>
</footer>


<style>
  footer {
    grid-template-columns: var(--bleed) 1fr 1fr 1fr var(--bleed);
    grid-template-rows: auto;
    gap: var(--gutter);
    margin: auto;
    padding-block: 2rem;
    background: hsla(200, 89%, 85%, 1);

    @media (min-width: 600px) {
      display: grid;
    }

    & a {
      color: inherit;
    }
    & li {
      margin-block: .5em;
    }

    @media (min-width: 800px) {
      grid-template-areas: 
        ". logo  contact contact . "
        ". about about   .       . "
        ". nav   legal   address . "
      ;
    }

    .ogor-logo     { grid-area: logo; }
    .contact  { grid-area: contact; }
    .about    { grid-area: about; }
    .nav      { grid-area: nav; }
    .legal    { grid-area: legal; }
    address   { grid-area: address; }
  }

  @media (min-width: 800px) {
    .about {
      & h4 { margin-top: 0; }
      & p  { margin-bottom: 0; }
      margin-trim: block;
    }
  }
  .about {
    min-width: ;
  }
  .contact {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 1em;
  }

  .social-media {
    display: contents;
  }
  .social-media a {
    margin: 0;
  }


  .nav {
    margin: 0;
    font-weight: 600;
  }

  .legal {
    list-style: none;
    text-align: right;
    margin: 0;
    grid-column: 2 / 3;
    height: 100%;
    padding: 0;
  }

  .ogor-details {
    grid-row: 3;
    grid-column: 3 / 4;
  }

  hr {
    display: none;
  }

  @media (max-width: 900px) {
    .ogor-logo {
      grid-column: 1 / 4;
    }

    .contact {
      grid-row: 3;
      grid-column: 1 / 4;
      justify-content: center;
    }

    .about {
      grid-row: 2;
      grid-column: 1 / 4;
    }

    .legal {
      grid-row: 5;
    }

    .ogor-details {
      grid-row: 5;
      grid-column: 3 / 4;
    }
    hr {
      display: block;
      border: none;
      height: 1px;
      width: 100%;
      border-top: 4px dotted #4BBFEE;
      grid-row: 4;
      grid-column: 1/4;
    }
  }

  @media (max-width: 600px) {
    .ogor-logo {
      grid-column: 1;
      grid-row: 1;
    }

    .contact {
      grid-column: 1;
      grid-row: 3;
      flex-direction: column;
      text-align: left;
      align-items: flex-start;
      gap: 0;
    }
    .contact a {
      margin-bottom: 1em;
    }

    .social-media {
      display: flex;
      gap: 1em;
    }

    .about {
      grid-column: 1;
      grid-row: 2;
    }
    .about h4 {
      margin-top: 0;
    }

    .legal {
      text-align: left;
      list-style: disc;
    }
    hr {
      grid-row: 4;
    }
  }

  address {
    margin-block: .25em;
    line-height: 1.75;
  }
</style>
